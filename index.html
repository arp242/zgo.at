<!DOCTYPE html><html lang="en"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>zGoat</title>
	<style>html {
  font: 16px/180% sans-serif;
  /* Possible sans-serif alternative; note you may want to adjust the
   * line-height and font-size if you want the fonts. Different values work
   * better for different fonts.
   * font: 18px/160% Calibri, 'DejaVu Sans Serif', sans-serif;
   */

          text-size-adjust: none;      /* Disables text adjustment algorithm on some mobile browsers, this is */
  -webkit-text-size-adjust: none;      /* intended for sites that are not designed for mobile viewing. */
}

@media (max-width: /*bodywidth*/54em) { /* Use smaller fonts and line-height on smaller screens. */
  html { font-size: 14px; line-height: 160%; }
}
@media (max-width: /*bodywidth*/26em) {
  html { font-size: 12px; line-height: 150%; }
}

pre, code {
  font-family: 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Consolas', monospace;
}

pre {
  font-size: 14px;                     /* Smaller text to fit more. */
  line-height: 130%;                   /* Idem. */
}

h1, h2, h3, h4, h5, h6 {
  font-variant-ligatures: common-ligatures discretionary-ligatures;
  font-feature-settings: 'liga' on, 'dlig' on;
}


/* DEFAULTS */
* {
  box-sizing: border-box;              /* Element width/height includes the border. */
}

*:target {
  background-color: #ff6;              /* Highlight elements in URL fragment, e.g. #some-header, or #footnote-1. */
}

html {
  background-color: #eee;              /* Neutral background to contrast with the page. */
  color: /*textcolor*/#252525;         /* Slightly less "harsh" black; looks subtly better. */
       tab-size: 4;                    /* Tab size of 4 is probably more common in editors etc. */
  -moz-tab-size: 4;                    /* Still needed as of Jan 2019 :-( https://bugzil.la/737785 */
}

html, body {
  margin: 0;                           /* No extra margin; shows up in some cases (e.g. when printing). */
}

.center, .page {
  max-width: /*bodywidth*/54rem;       /* Don't make it too wide, as that makes it harder to read. */
  margin: .5rem auto;                  /* Add some extra space at top/bottom, and centre it. */
  position: relative;                  /* So that absolute/relative positioning is relative to the page, which is almost always what's desired. */
}

.page {
  padding: /*pady*/1rem /*padx*/4rem;  /* Small padding on top, larger on sides. */
  background-color: /*bgcolor*/#fff;   /* White background to override the html one */
                                       /* A slightly grey or yellowish tint also works well, and gives a warmer feel.
                                        * Some suggestions: #fbfbf7, #fffff7 */
                                       /* Remove this and the box-shadow for an even background colour. */
  box-shadow: 0 0 6px rgba(0,0,0,.2);  /* Box-shadow effect looks quite handsome here. */
}
@media (max-width: /*bodywidth*/54em) {
  .page, .center {
    max-width: 100%;                   /* Full-width page. */
    padding: 0 1rem;                   /* Modest amount of padding to prevent wasting screen space. */
  }
}


/* PRINTING */
@page {
  margin: 0;                           /* Don't add extra margin to pages, .page already has it. */
                                       /* Also hides URL and such that most browsers add. */
}
@media print {                         /* Reset some stuff for printing. */
  body {
    background-color: #fff;
  }
  .page, .center {
    box-shadow: none;
    padding: 0 1cm;
    margin: 0;
    max-width: none;
  }
  .page:first-child, .center:first-child {
    padding-top: 5mm;
  }
}

.page-a4, .page.page-a4 {              /* A4 paper used in most places */
  width: 21cm;
  height: 29.7cm;
}

.page-letter, .page.page-letter {      /* Standard U.S. letter */
  width: 8.5in;
  height: 11in;
}


/* LINKS */
a,
a code,                                /* Otherwise it would just stay black text; common enough to include here. */
.link {
  color: #00f;                         /* Make sure colour is the same in all browsers. */
  text-decoration: none;               /* Underlining can look "busy"; the colour on its own should be enough. */
  transition: color .2s;               /* Animate the change in colour effect on hover; subtle but noticeable. */
}
a:hover, .link:hover {
  text-decoration: underline;          /* Provide some feedback by underlining and changing colour. */
  color: #6491ff;                      /* Light blue */
}
a:hover code  {
  color: #6491ff;                      /* Also change colour of code on hover. */
}


/* HEADERS */

/* The intention is that there is only one h1 on a page: at the top. If you use
 * h1 different, then you may want to add a border like in the h2. */
h1 {
  text-align: center;
  padding: .5em 0;                     /* More than default. */
  font-size: 1.7em;                    /* Default of 2em is pretty large. */
}

h2 {
  border-bottom: 1px solid /*textcolor*/#252525;  /* Underline to stand out more. */
  padding-bottom: .2em;                /* Border not too close to the text. */
  font-size: 1.5em;                    /* Default of 1.8em is pretty large. */
}

h3 {
  font-size: 1.3em;                    /* Default of 1.6em is pretty large. */
}

h4 {
  font-size: 1.1em;                    /* Slightly larger than default of 1em. */
}

h5, h6 {
  font-size: 1em;                      /* Don't make h5 and h6 smaller than base font. */
}


/* BLOCKQUOTE */
blockquote {
  font-style: italic;                  /* Quotations are usually typeset in italics. */
}


/* CODE */
code, pre, kbd, samp {
  background-color: #f5f5f5;           /* Make it stand out a bit more. */
  color: #000;                         /* Override the softer black, as we're now using a grey background. */
}

pre {
  overflow: auto;                      /* Add scrollbars if the content is too high or wide. */
  max-height: 500px;                   /* Scroll content larger than this. */
  padding: .5em 1em;                   /* Don't put the text right on the edge. */
  border-radius: 2px;                  /* Looks better with subtly rounded corner. */
  border-top: 1px solid #d5d5d5;          /* Looks better. */
  border-bottom: 1px solid #d5d5d5;       /* Looks better. */
}

@media (min-width: /*bodywidth*/54em) { /* Only if the screen is wide enough. */
  pre.full {
    margin-left: /*padx*/-4rem;
    width: calc(100% + /*padx*/8rem);
  }
}

code, kbd, samp {
  padding: 1px 2px;                    /* Make sure the text isn't right on the edge of the background. */
}
pre > code {                           /* Reset the above styling on <pre><code> */
  padding: 0;
  box-shadow: none;
  border: none;
}

h1 code, h2 code, h3 code, h4 code, h5 code, h6 code {
  background-color: transparent;       /* Don't include grey background in headers, looks ugly. */
  box-shadow: none;
  color: inherit;
}


/* HORIZONTAL RULER */

/* Make the <hr> element look better by replacing it with some text (usually
 * decorative characters such as fleurons or an asterism. */
hr {
  border: none;                        /* Remove default border. */
  text-align: center;                  /* Centre the characters. */
  font-size: 60px;                     /* Make it larger; what looks good depends a bit on which character you choose. */
  color: /*textcolor*/#252525;         /* Standard text colour; it's grey by default. */
  opacity: .9;                         /* But make it slightly less dark than regular text. */
}

hr:before {
  /* Two fleurons with touching edges.
  content: "☙❧";
  letter-spacing: -4px;
  */

  /* As SVG, because too many browsers suck at rendering fonts well. This is
   * the same as the above two rules (as they *should* render). */
  content: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMC4yIDkuMiIgaGVpZ2h0PSIzNC44IiB3aWR0aD0iMTE0LjMiPjxwYXRoIGQ9Ik0xMy4yIDBxMS4xIDAgMS4zIDEuMiAwIDEtLjcgMS4yLTEuOC40LTIgLjggMi42LjMgMy4yIDMuMWguMmwuMi44LS40LjFxLS4yIDEuOC0xLjggMS45LTEgMC0xLjMtMSAwLS44LjItLjguMi40LjguNC44IDAgMS0uOFExMSA2LjEgMTEgMy43cS0xLjQgMC0yLjEgMSAxLjQuNyAxLjQgMS44LS4xIDIuNS0zLjYgMi43US41IDkuMiAwIDUuNXEwLS42LjctLjcuNSAwIC42LjV2LjJsLS4xLjRxMCAxIDEuMSAxIDEgMCAxLS43UTQgMS4yIDcgMXEyIC4xIDIgMS43di4xcTAgLjQtLjQgMS41IDEtLjggMi0xIC42IDAgLjYtLjQuOC0xIDEuNi0xLjMuNi0uNC42LS44bC0uMi0uNHEtLjItLjMgMC0uNHptLTEuNiAzLjd2LjFxMCAxLjQgMi4zIDIuMi0uMy0yLTIuMy0yLjN6Ii8+PHBhdGggZD0iTTE3IDBxLTEgMC0xLjMgMS4yIDAgMSAuOCAxLjIgMS44LjQgMiAuOC0yLjcuMy0zLjIgMy4xSDE1bC0uMi44LjUuMXEuMiAxLjggMS44IDEuOSAxIDAgMS4yLTEgMC0uOC0uMi0uOC0uMS40LS43LjQtLjkgMC0xLS44IDIuNy0uOCAyLjgtMy4yIDEuNCAwIDIgMS0xLjMuNy0xLjMgMS44IDAgMi41IDMuNSAyLjcgNi40IDAgNi44LTMuNyAwLS42LS42LS43LS42IDAtLjcuNXYuMmwuMi40cTAgMS0xLjIgMS0uOSAwLTEtLjctLjYtNS0zLjctNS4yLTIgLjEtMiAxLjd2LjFxMCAuNC40IDEuNS0xLS44LTItMS0uNiAwLS42LS40LS43LTEtMS41LTEuMy0uNi0uNC0uNi0uOGwuMi0uNHEuMi0uMyAwLS40em0xLjcgMy43di4xcTAgMS40LTIuNCAyLjIuMy0yIDIuNC0yLjN6Ii8+PC9zdmc+);

  /* Alternative: separate with a space:
  content: "☙ ❧";
  */

  /* Or separate with letter-spacing and padding:
  letter-spacing: 1em;
  padding-left: 1em;
  */

  /* Or asterism:
  content: "⁂";
  */

  /* Many possibilities
  content: "* * *";
  content: "· · ·";
  */
}
</style>

	<style>
		/* Override some hello css */
		code  { background: transparent; padding: 0; }
		h2    { text-align: center; border-bottom: 0; }
		.page { max-width: 60em; padding: 1rem 1rem; } 

		/* Intro */
		.intro-links { display: flex; justify-content: space-around; }

		/* Section layout */
		section      { display: flex; flex-wrap: wrap; justify-content: space-around; }
		section h2   { width: 100%; }
		section div  { position: relative; display: flex; flex-wrap: wrap; align-content: flex-start;
		               width: 18.5rem; min-height: 2rem; margin-bottom: 1em; padding: .4em .4em 2em .8em;
		               border: 1px solid #d1d5da; border-radius: 3px; }
		section span { position: absolute; bottom: 0; width: 100%; padding: 0 .8em;
		               margin-left: -.8em; margin-right: 0; text-align: right; background-color: #eee; }
		@media (max-width: 60em) { section div { width: 45%;  } }
		@media (max-width: 40em) { section div { width: 100%; } }

		/* Section content */
		section div h3 { flex-grow: 1; font-size: 1em; margin: 0; }
		section div p  { flex-basis: 100%; margin: 0; }
	</style>
</head>
<body>
	<h1>zGoat</h1>

	<div class="page">
		<p style="text-align: center">zgo.at contains my Go packages.</p>

		<p class="intro-links">
			<a href="https://github.com/arp242">github.com/arp242</a>
			<a href="https://www.arp242.net">arp242.net</a>
		</p>
	</div>
	<hr/>
<section class="page">
<h2 id="applications">Applications</h2>
<div>
<h3><a href="https://github.com/arp242/goatcounter">goatcounter</a></h3>
<code><a href="https://godocs.io/zgo.at/goatcounter/v2">godoc</a></code>
<p>Easy web analytics. No tracking of personal data.</p>
<span>v2.5.0 │ ★ 4209</span>
</div>
<div>
<h3><a href="https://github.com/arp242/uni">uni</a></h3>
<code><a href="https://godocs.io/zgo.at/uni/v2">godoc</a></code>
<p>Query the Unicode database from the commandline, with good support for emojis.</p>
<span>v2.6.0 │ ★ 773</span>
</div>
<div>
<h3><a href="https://github.com/arp242/singlepage">singlepage</a></h3>
<code><a href="https://godocs.io/zgo.at/singlepage">godoc</a></code>
<p>Bundle external assets in a HTML file to distribute a stand-alone HTML document.</p>
<span>v1.0.0 │ ★ 26</span>
</div>
<div>
<h3><a href="https://github.com/arp242/colorcount">colorcount</a></h3>
<code><a href="https://godocs.io/zgo.at/colorcount">godoc</a></code>
<p>Display the colours used in a PNG image.</p>
<span>  ★ 7</span>
</div>
<div>
<h3><a href="https://github.com/arp242/goimport">goimport</a></h3>
<code><a href="https://godocs.io/zgo.at/goimport">godoc</a></code>
<p>Add, remove, or replace imports in Go files.</p>
<span>v1.0.2 │ ★ 6</span>
</div>
<div>
<h3><a href="https://github.com/arp242/gomodgraph">gomodgraph</a></h3>
<code><a href="https://godocs.io/zgo.at/gomodgraph">godoc</a></code>
<p>&#39;go mod graph&#39; as a nicely indented graph.</p>
<span>v1.0.0 │ ★ 5</span>
</div>
<div>
<h3><a href="https://github.com/arp242/border">border</a></h3>
<code><a href="https://godocs.io/zgo.at/border">godoc</a></code>
<p>Commandline tool to add a border around PNG images.</p>
<span>  ★ 4</span>
</div>
<div>
<h3><a href="https://github.com/arp242/wtff">wtff</a></h3>
<code><a href="https://godocs.io/zgo.at/wtff">godoc</a></code>
<p>Frontend for some ffmpeg operations.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/sqlbench">sqlbench</a></h3>
<code><a href="https://godocs.io/zgo.at/sqlbench">godoc</a></code>
<p>Run benchmarks on an SQL database.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/git-stats">git-stats</a></h3>
<code><a href="https://godocs.io/zgo.at/git-stats">godoc</a></code>
<p>Aggregate statistics for git repos.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/cantuse">cantuse</a></h3>
<code><a href="https://godocs.io/zgo.at/cantuse">godoc</a></code>
<p>List browsers in which a feature *won&#39;t* work.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/jfmt">jfmt</a></h3>
<code><a href="https://godocs.io/zgo.at/jfmt/cmd/jfmt">godoc</a></code>
<p>Format json, nicely.</p>
<span>  ★ 2</span>
</div>
<div>
<h3><a href="https://github.com/arp242/gosodoff">gosodoff</a></h3>
<code><a href="https://godocs.io/zgo.at/gosodoff">godoc</a></code>
<p>Generate return statements in Go code.</p>
<span>  ★ 2</span>
</div>
<div>
<h3><a href="https://github.com/arp242/har">har</a></h3>
<code><a href="https://godocs.io/zgo.at/har">godoc</a></code>
<p>Read HAR (&#34;HTTP Archive format&#34;) files.</p>
<span>  ★ 1</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zcert">zcert</a></h3>
<code><a href="https://godocs.io/zgo.at/zcert">godoc</a></code>
<p></p>
<span>  ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/kommentaar">kommentaar</a></h3>
<code><a href="https://godocs.io/zgo.at/kommentaar">godoc</a></code>
<p>Generate documentation for Go APIs.</p>
<span>  ★ 0</span>
</div>
</section>
<section class="page">
<h2 id="libraries">Libraries</h2>
<div>
<h3><a href="https://github.com/arp242/zcache">zgo.at/zcache</a></h3>
<code><a href="https://godocs.io/zgo.at/zcache/v2">godoc</a></code>
<p>An in-memory key:value store/cache (similar to Memcached) library for Go, suitable for single-machine applications.</p>
<span>v2.1.0 │ ★ 60</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zli">zgo.at/zli</a></h3>
<code><a href="https://godocs.io/zgo.at/zli">godoc</a></code>
<p>A Go library for writing CLI programs. It includes flag parsing, colour escape codes, and various helpful utility functions, and makes testing fairly easy.</p>
<span>  ★ 39</span>
</div>
<div>
<h3><a href="https://github.com/arp242/isbot">zgo.at/isbot</a></h3>
<code><a href="https://godocs.io/zgo.at/isbot">godoc</a></code>
<p>Detect HTTP bots.</p>
<span>v1.0.0 │ ★ 19</span>
</div>
<div>
<h3><a href="https://github.com/arp242/follow">zgo.at/follow</a></h3>
<code><a href="https://godocs.io/zgo.at/follow">godoc</a></code>
<p>Follow a file for changes; e.g. &#34;tail -F&#34;.</p>
<span>  ★ 18</span>
</div>
<div>
<h3><a href="https://github.com/arp242/sconfig">zgo.at/sconfig</a></h3>
<code><a href="https://godocs.io/zgo.at/sconfig">godoc</a></code>
<p>A simple and functional configuration file parser.</p>
<span>v1.2.2 │ ★ 17</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zdb">zgo.at/zdb</a></h3>
<code><a href="https://godocs.io/zgo.at/zdb">godoc</a></code>
<p>Zdb provides a nice API to interact with SQL databases.</p>
<span>  ★ 11</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zhttp">zgo.at/zhttp</a></h3>
<code><a href="https://godocs.io/zgo.at/zhttp">godoc</a></code>
<p>Martin&#39;s HTTP package.</p>
<span>  ★ 10</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zprof">zgo.at/zprof</a></h3>
<code><a href="https://godocs.io/zgo.at/zprof">godoc</a></code>
<p>Display runtime profiling data for Go programs over HTTP.</p>
<span>  ★ 9</span>
</div>
<div>
<h3><a href="https://github.com/arp242/gadget">zgo.at/gadget</a></h3>
<code><a href="https://godocs.io/zgo.at/gadget">godoc</a></code>
<p>Get the browser and OS from the User-Agent header.</p>
<span>v1.0.0 │ ★ 8</span>
</div>
<div>
<h3><a href="https://github.com/arp242/blackmail">zgo.at/blackmail</a></h3>
<code><a href="https://godocs.io/zgo.at/blackmail">godoc</a></code>
<p>Send emails with a friendly API.</p>
<span>  ★ 8</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zstd">zgo.at/zstd</a></h3>
<code><a href="https://godocs.io/zgo.at/zstd">godoc</a></code>
<p>Extensions to Go&#39;s stdlib.</p>
<span>  ★ 4</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zvalidate">zgo.at/zvalidate</a></h3>
<code><a href="https://godocs.io/zgo.at/zvalidate">godoc</a></code>
<p>Static validation for Go that returns parsed values.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zlog">zgo.at/zlog</a></h3>
<code><a href="https://godocs.io/zgo.at/zlog">godoc</a></code>
<p>Go logging library.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/tz">zgo.at/tz</a></h3>
<code><a href="https://godocs.io/zgo.at/tz">godoc</a></code>
<p>Go timezone convience library.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/slog_align">zgo.at/slog_align</a></h3>
<code><a href="https://godocs.io/zgo.at/slog_align">godoc</a></code>
<p>Less &#34;wall of text&#34;-y slog handler.</p>
<span>  ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/errors">zgo.at/errors</a></h3>
<code><a href="https://godocs.io/zgo.at/errors">godoc</a></code>
<p>Yet another errors package.</p>
<span>v1.2.0 │ ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/acidtab">zgo.at/acidtab</a></h3>
<code><a href="https://godocs.io/zgo.at/acidtab">godoc</a></code>
<p>Print nicely aligned tables in the terminal.</p>
<span>v1.0.0 │ ★ 3</span>
</div>
<div>
<h3><a href="https://github.com/arp242/z18n">zgo.at/z18n</a></h3>
<code><a href="https://godocs.io/zgo.at/z18n">godoc</a></code>
<p>I18n library.</p>
<span>  ★ 2</span>
</div>
<div>
<h3><a href="https://github.com/arp242/jfmt">zgo.at/jfmt</a></h3>
<code><a href="https://godocs.io/zgo.at/jfmt">godoc</a></code>
<p>Format json, nicely.</p>
<span>  ★ 2</span>
</div>
<div>
<h3><a href="https://github.com/arp242/hubhub">zgo.at/hubhub</a></h3>
<code><a href="https://godocs.io/zgo.at/hubhub">godoc</a></code>
<p>Set of utility functions for working with the GitHub API.</p>
<span>  ★ 2</span>
</div>
<div>
<h3><a href="https://github.com/arp242/zstripe">zgo.at/zstripe</a></h3>
<code><a href="https://godocs.io/zgo.at/zstripe">godoc</a></code>
<p>Set of utility functions for working with the Stripe API.</p>
<span>v1.1.0 │ ★ 1</span>
</div>
<div>
<h3><a href="https://github.com/arp242/json">zgo.at/json</a></h3>
<code><a href="https://godocs.io/zgo.at/json">godoc</a></code>
<p>Encoding/json with patches.</p>
<span>  ★ 1</span>
</div>
<div>
<h3><a href="https://github.com/arp242/ztpl">zgo.at/ztpl</a></h3>
<code><a href="https://godocs.io/zgo.at/ztpl">godoc</a></code>
<p></p>
<span>  ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/termtext">zgo.at/termtext</a></h3>
<code><a href="https://godocs.io/zgo.at/termtext">godoc</a></code>
<p>Termtext is a Go package to deal with monospace text as interpreted by terminals.</p>
<span>v1.4.0 │ ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/termfo">zgo.at/termfo</a></h3>
<code><a href="https://godocs.io/zgo.at/termfo">godoc</a></code>
<p>A terminfo library.</p>
<span>  ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/term">zgo.at/term</a></h3>
<code><a href="https://godocs.io/zgo.at/term">godoc</a></code>
<p> Go terminal and console support.</p>
<span>  ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/ps">zgo.at/ps</a></h3>
<code><a href="https://godocs.io/zgo.at/ps">godoc</a></code>
<p>List system processes.</p>
<span>  ★ 0</span>
</div>
<div>
<h3><a href="https://github.com/arp242/guru">zgo.at/guru</a></h3>
<code><a href="https://godocs.io/zgo.at/guru">godoc</a></code>
<p>Go errors with a Guru Meditation Number.</p>
<span>v1.1.0 │ ★ 0</span>
</div>
</section>
	<script>// GoatCounter: https://www.goatcounter.com
// This file is released under the ISC license: https://opensource.org/licenses/ISC
;(function() {
	'use strict';

	if (window.goatcounter && window.goatcounter.vars)  // Compatibility with very old version; do not use.
		window.goatcounter = window.goatcounter.vars
	else
		window.goatcounter = window.goatcounter || {}

	// Load settings from data-goatcounter-settings.
	var s = document.querySelector('script[data-goatcounter]')
	if (s && s.dataset.goatcounterSettings) {
		try         { var set = JSON.parse(s.dataset.goatcounterSettings) }
		catch (err) { console.error('invalid JSON in data-goatcounter-settings: ' + err) }
		for (var k in set)
			if (['no_onload', 'no_events', 'allow_local', 'allow_frame', 'path', 'title', 'referrer', 'event'].indexOf(k) > -1)
				window.goatcounter[k] = set[k]
	}

	var enc = encodeURIComponent

	// Get all data we're going to send off to the counter endpoint.
	var get_data = function(vars) {
		var data = {
			p: (vars.path     === undefined ? goatcounter.path     : vars.path),
			r: (vars.referrer === undefined ? goatcounter.referrer : vars.referrer),
			t: (vars.title    === undefined ? goatcounter.title    : vars.title),
			e: !!(vars.event || goatcounter.event),
			s: [window.screen.width, window.screen.height, (window.devicePixelRatio || 1)],
			b: is_bot(),
			q: location.search,
		}

		var rcb, pcb, tcb  // Save callbacks to apply later.
		if (typeof(data.r) === 'function') rcb = data.r
		if (typeof(data.t) === 'function') tcb = data.t
		if (typeof(data.p) === 'function') pcb = data.p

		if (is_empty(data.r)) data.r = document.referrer
		if (is_empty(data.t)) data.t = document.title
		if (is_empty(data.p)) data.p = get_path()

		if (rcb) data.r = rcb(data.r)
		if (tcb) data.t = tcb(data.t)
		if (pcb) data.p = pcb(data.p)
		return data
	}

	// Check if a value is "empty" for the purpose of get_data().
	var is_empty = function(v) { return v === null || v === undefined || typeof(v) === 'function' }

	// See if this looks like a bot; there is some additional filtering on the
	// backend, but these properties can't be fetched from there.
	var is_bot = function() {
		// Headless browsers are probably a bot.
		var w = window, d = document
		if (w.callPhantom || w._phantom || w.phantom)
			return 150
		if (w.__nightmare)
			return 151
		if (d.__selenium_unwrapped || d.__webdriver_evaluate || d.__driver_evaluate)
			return 152
		if (navigator.webdriver)
			return 153
		return 0
	}

	// Object to urlencoded string, starting with a ?.
	var urlencode = function(obj) {
		var p = []
		for (var k in obj)
			if (obj[k] !== '' && obj[k] !== null && obj[k] !== undefined && obj[k] !== false)
				p.push(enc(k) + '=' + enc(obj[k]))
		return '?' + p.join('&')
	}

	// Show a warning in the console.
	var warn = function(msg) {
		if (console && 'warn' in console)
			console.warn('goatcounter: ' + msg)
	}

	// Get the endpoint to send requests to.
	var get_endpoint = function() {
		var s = document.querySelector('script[data-goatcounter]')
		if (s && s.dataset.goatcounter)
			return s.dataset.goatcounter
		return (goatcounter.endpoint || window.counter)  // counter is for compat; don't use.
	}

	// Get current path.
	var get_path = function() {
		var loc = location,
			c = document.querySelector('link[rel="canonical"][href]')
		if (c) {  // May be relative or point to different domain.
			var a = document.createElement('a')
			a.href = c.href
			if (a.hostname.replace(/^www\./, '') === location.hostname.replace(/^www\./, ''))
				loc = a
		}
		return (loc.pathname + loc.search) || '/'
	}

	// Run function after DOM is loaded.
	var on_load = function(f) {
		if (document.body === null)
			document.addEventListener('DOMContentLoaded', function() { f() }, false)
		else
			f()
	}

	// Filter some requests that we (probably) don't want to count.
	goatcounter.filter = function() {
		if ('visibilityState' in document && document.visibilityState === 'prerender')
			return 'visibilityState'
		if (!goatcounter.allow_frame && location !== parent.location)
			return 'frame'
		if (!goatcounter.allow_local && location.hostname.match(/(localhost$|^127\.|^10\.|^172\.(1[6-9]|2[0-9]|3[0-1])\.|^192\.168\.|^0\.0\.0\.0$)/))
			return 'localhost'
		if (!goatcounter.allow_local && location.protocol === 'file:')
			return 'localfile'
		if (localStorage && localStorage.getItem('skipgc') === 't')
			return 'disabled with #toggle-goatcounter'
		return false
	}

	// Get URL to send to GoatCounter.
	window.goatcounter.url = function(vars) {
		var data = get_data(vars || {})
		if (data.p === null)  // null from user callback.
			return
		data.rnd = Math.random().toString(36).substr(2, 5)  // Browsers don't always listen to Cache-Control.

		var endpoint = get_endpoint()
		if (!endpoint)
			return warn('no endpoint found')

		return endpoint + urlencode(data)
	}

	// Count a hit.
	window.goatcounter.count = function(vars) {
		var f = goatcounter.filter()
		if (f)
			return warn('not counting because of: ' + f)
		var url = goatcounter.url(vars)
		if (!url)
			return warn('not counting because path callback returned null')
		navigator.sendBeacon(url)
	}

	// Get a query parameter.
	window.goatcounter.get_query = function(name) {
		var s = location.search.substr(1).split('&')
		for (var i = 0; i < s.length; i++)
			if (s[i].toLowerCase().indexOf(name.toLowerCase() + '=') === 0)
				return s[i].substr(name.length + 1)
	}

	// Track click events.
	window.goatcounter.bind_events = function() {
		if (!document.querySelectorAll)  // Just in case someone uses an ancient browser.
			return

		var send = function(elem) {
			return function() {
				goatcounter.count({
					event:    true,
					path:     (elem.dataset.goatcounterClick || elem.name || elem.id || ''),
					title:    (elem.dataset.goatcounterTitle || elem.title || (elem.innerHTML || '').substr(0, 200) || ''),
					referrer: (elem.dataset.goatcounterReferrer || elem.dataset.goatcounterReferral || ''),
				})
			}
		}

		Array.prototype.slice.call(document.querySelectorAll("*[data-goatcounter-click]")).forEach(function(elem) {
			if (elem.dataset.goatcounterBound)
				return
			var f = send(elem)
			elem.addEventListener('click', f, false)
			elem.addEventListener('auxclick', f, false)  // Middle click.
			elem.dataset.goatcounterBound = 'true'
		})
	}

	// Add a "visitor counter" frame or image.
	window.goatcounter.visit_count = function(opt) {
		on_load(function() {
			opt        = opt        || {}
			opt.type   = opt.type   || 'html'
			opt.append = opt.append || 'body'
			opt.path   = opt.path   || get_path()
			opt.attr   = opt.attr   || {width: '200', height: (opt.no_branding ? '60' : '80')}

			opt.attr['src'] = get_endpoint() + 'er/' + enc(opt.path) + '.' + enc(opt.type) + '?'
			if (opt.no_branding) opt.attr['src'] += '&no_branding=1'
			if (opt.style)       opt.attr['src'] += '&style=' + enc(opt.style)
			if (opt.start)       opt.attr['src'] += '&start=' + enc(opt.start)
			if (opt.end)         opt.attr['src'] += '&end='   + enc(opt.end)

			var tag = {png: 'img', svg: 'img', html: 'iframe'}[opt.type]
			if (!tag)
				return warn('visit_count: unknown type: ' + opt.type)

			if (opt.type === 'html') {
				opt.attr['frameborder'] = '0'
				opt.attr['scrolling']   = 'no'
			}

			var d = document.createElement(tag)
			for (var k in opt.attr)
				d.setAttribute(k, opt.attr[k])

			var p = document.querySelector(opt.append)
			if (!p)
				return warn('visit_count: append not found: ' + opt.append)
			p.appendChild(d)
		})
	}

	// Make it easy to skip your own views.
	if (location.hash === '#toggle-goatcounter') {
		if (localStorage.getItem('skipgc') === 't') {
			localStorage.removeItem('skipgc', 't')
			alert('GoatCounter tracking is now ENABLED in this browser.')
		}
		else {
			localStorage.setItem('skipgc', 't')
			alert('GoatCounter tracking is now DISABLED in this browser until ' + location + ' is loaded again.')
		}
	}

	if (!goatcounter.no_onload)
		on_load(function() {
			// 1. Page is visible, count request.
			// 2. Page is not yet visible; wait until it switches to 'visible' and count.
			// See #487
			if (!('visibilityState' in document) || document.visibilityState === 'visible')
				goatcounter.count()
			else {
				var f = function(e) {
					if (document.visibilityState !== 'visible')
						return
					document.removeEventListener('visibilitychange', f)
					goatcounter.count()
				}
				document.addEventListener('visibilitychange', f)
			}

			if (!goatcounter.no_events)
				goatcounter.bind_events()
		})
})();
</script>


</body></html>
